# Руководство пользователя: Датчик температуры Endress+Hauser TM311

## Для инженеров АСУТП

### Общая информация

**Датчик:** Endress+Hauser TM311  
**Тип:** IO-Link датчик температуры  
**Артикул:** E&H.TM311  
**Интерфейс:** IO-Link  

Датчик TM311 - это высокоточный датчик температуры с интерфейсом IO-Link, который обеспечивает не только измерение температуры, но и расширенную диагностику состояния измерений.

### Основные характеристики

- **Диапазон измерения:** -3200.0°C до 3200.0°C
- **Разрешение:** 0.1°C (одна десятая градуса)
- **Протокол связи:** IO-Link
- **Размер данных процесса:** 4 байта

### Считывание значений

#### Получение температуры

Датчик возвращает значение температуры с точностью до одного знака после запятой. Например:
- 25.7°C
- -12.3°C
- 100.0°C

**Примечание:** В случае ошибки связи или неисправности датчика возвращается аварийное значение, заданное в параметре `P_ERR`.

### Состояния датчика

Датчик может находиться в различных состояниях, которые указывают на качество и надежность измерения.

#### Нормальное состояние

**Код состояния: 1**

Измерение выполнено корректно, значение можно использовать без ограничений.

#### Состояния с ограничениями

Датчик может сообщать о различных ограничениях качества измерения:

### Коды ошибок и диагностика

Датчик использует двухуровневую систему статусов для описания состояния измерения:

#### Статус качества измерения (Status1)

| Статус | Диапазон кодов | Описание |
|--------|----------------|----------|
| **Good** (Хорошо) | 1 | Измерение корректно, значение можно использовать |
| **Bad** (Плохо) | от -10 до -19 | **'Bad' - значение не может быть использовано** |
| **Uncertain** (Неопределенно) | от -20 до -29 | **'Uncertain' — значение может использоваться только ограниченно (например, температура устройства вне диапазона)** |
| **Manual/Fixed** (Ручной/Фиксированный) | от -30 до -39 | **'Manual/Fixed' — значение может использоваться только ограниченно (например, симуляция)** |

#### Статус предельных значений (Status2)

Дополнительно к основному статусу, датчик может сообщать о нарушении предельных значений:

| Код (остаток от деления на 10) | Описание |
|--------------------------------|----------|
| **-0** | Нет нарушений предельных значений |
| **-1** | **'Low limited' - значение нарушило нижний предел** |
| **-2** | **'High limited' - значение нарушило верхний предел** |
| **-3** | **'Constant' - значение установлено как постоянное (например, симуляция)** |

### Примеры состояний

#### Пример 1: Нормальная работа
**Код: 1**  
**Описание:** Датчик работает нормально, значение достоверно.  
**Действия:** Нет необходимости в действиях.

#### Пример 2: Плохое качество измерения
**Код: -10**  
**Описание:** 'Bad' - значение не может быть использовано  
**Причина:** Датчик не может выполнить измерение (возможно, обрыв датчика или неисправность).  
**Действия:** Проверить подключение датчика, проверить исправность датчика.

#### Пример 3: Нижний предел нарушен
**Код: -11**  
**Описание:** 'Bad' - значение не может быть использовано; 'Low limited' - значение нарушило нижний предел  
**Причина:** Измеренная температура ниже минимального допустимого значения для датчика.  
**Действия:** Проверить диапазон измерения датчика, убедиться что температура в рабочем диапазоне.

#### Пример 4: Верхний предел нарушен
**Код: -12**  
**Описание:** 'Bad' - значение не может быть использовано; 'High limited' - значение нарушило верхний предел  
**Причина:** Измеренная температура выше максимального допустимого значения для датчика.  
**Действия:** Проверить диапазон измерения датчика, убедиться что температура в рабочем диапазоне.

#### Пример 5: Симуляция активна
**Код: -13**  
**Описание:** 'Bad' - значение не может быть использовано; 'Constant' - значение установлено как постоянное (например, симуляция)  
**Причина:** Активен режим симуляции датчика.  
**Действия:** Если симуляция не предполагалась, отключить режим симуляции.

#### Пример 6: Неопределенное измерение
**Код: -20**  
**Описание:** 'Uncertain' — значение может использоваться только ограниченно (например, температура устройства вне диапазона)  
**Причина:** Измерение выполнено, но есть факторы, снижающие его достоверность (например, температура электроники датчика вне рабочего диапазона).  
**Действия:** Использовать значение с осторожностью, проверить условия эксплуатации датчика.

#### Пример 7: Неопределенное измерение с нижним пределом
**Код: -21**  
**Описание:** 'Uncertain' — значение может использоваться только ограниченно (например, температура устройства вне диапазона); 'Low limited' - значение нарушило нижний предел  
**Причина:** Комбинация неопределенности измерения и нарушения нижнего предела.  
**Действия:** Проверить условия эксплуатации и диапазон измерения.

#### Пример 8: Неопределенное измерение с верхним пределом
**Код: -22**  
**Описание:** 'Uncertain' — значение может использоваться только ограниченно (например, температура устройства вне диапазона); 'High limited' - значение нарушило верхний предел  
**Причина:** Комбинация неопределенности измерения и нарушения верхнего предела.  
**Действия:** Проверить условия эксплуатации и диапазон измерения.

#### Пример 9: Ручной режим
**Код: -30**  
**Описание:** 'Manual/Fixed' — значение может использоваться только ограниченно (например, симуляция)  
**Причина:** Датчик находится в ручном режиме или режиме фиксированного значения.  
**Действия:** Проверить настройки датчика, при необходимости вернуть в автоматический режим.

#### Пример 10: Ручной режим с нижним пределом
**Код: -31**  
**Описание:** 'Manual/Fixed' — значение может использоваться только ограниченно (например, симуляция); 'Low limited' - значение нарушило нижний предел  
**Причина:** Ручной режим с нарушением нижнего предела.  
**Действия:** Проверить настройки и установленное значение.

#### Пример 11: Ручной режим с верхним пределом
**Код: -32**  
**Описание:** 'Manual/Fixed' — значение может использоваться только ограниченно (например, симуляция); 'High limited' - значение нарушило верхний предел  
**Причина:** Ручной режим с нарушением верхнего предела.  
**Действия:** Проверить настройки и установленное значение.

#### Пример 12: Ручной режим с константой
**Код: -33**  
**Описание:** 'Manual/Fixed' — значение может использоваться только ограниченно (например, симуляция); 'Constant' - значение установлено как постоянное (например, симуляция)  
**Причина:** Активна симуляция с постоянным значением.  
**Действия:** Если симуляция не предполагалась, отключить режим симуляции.

### Ошибки связи IO-Link

При проблемах связи с датчиком через IO-Link, датчик может возвращать следующие коды ошибок:

| Код | Описание |
|-----|----------|
| Отрицательный | Ошибка связи IO-Link (например, NOTCONNECTED, DEVICEERROR) |

**Действия при ошибках связи:**
1. Проверить физическое подключение датчика
2. Проверить кабель и разъемы
3. Убедиться в правильности конфигурации IO-Link мастера
4. Проверить питание датчика

### Особенности работы

#### Режим эмуляции

В режиме эмуляции системы датчик возвращает значения из базовой конфигурации, а не реальные измерения. Это используется для тестирования системы без физического датчика.

#### Калибровка

Датчик поддерживает корректировку нуля через параметр `P_ZERO_ADJUST_COEFF`. Это позволяет компенсировать систематические отклонения измерений.

#### Аварийное значение

При ошибке связи IO-Link датчик возвращает аварийное значение, которое задается параметром `P_ERR`. Это значение можно использовать для безопасной остановки процесса или перехода в безопасное состояние.

### Рекомендации по эксплуатации

1. **Регулярный мониторинг:** Следите за кодами состояния датчика, особенно за появлением состояний `Uncertain` и `Bad`.

2. **Проверка предельных значений:** При появлении кодов с нарушением предельных значений (-X1, -X2) проверьте, находится ли измеряемая температура в допустимом диапазоне для датчика.

3. **Контроль связи:** Регулярно проверяйте качество связи IO-Link, особенно в условиях электромагнитных помех.

4. **Документирование:** Ведите журнал появления ошибок для анализа тенденций и планирования профилактического обслуживания.

5. **Калибровка:** Периодически проверяйте и при необходимости корректируйте настройки калибровки датчика.

### Техническая поддержка

При возникновении проблем с датчиком:

1. Запишите код состояния и описание ошибки
2. Проверьте физическое состояние датчика и кабелей
3. Проверьте параметры конфигурации в системе управления
4. Обратитесь к технической документации производителя
5. При необходимости свяжитесь со службой технической поддержки

### Связанные документы

- [Техническая документация для разработчиков](TM311.md)
- [Документация Endress+Hauser TM311](https://www.endress.com/en/field-instruments-overview/temperature-measurement-thermometers-transmitters/pt100-temperature-sensor-io-link-tm311)
- [Спецификация IO-Link](https://io-link.com/en/Technology/Technical.php)

### История документа

- **2025-10-30:** Создание руководства пользователя для инженеров АСУТП
